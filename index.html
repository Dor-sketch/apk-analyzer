<!DOCTYPE html>
<html lang="en">
<head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-T7HFKFX0PR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-T7HFKFX0PR');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APK Analyzer</title>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "APK Analyzer",
            "description": "Detects video files, analyzes manifest permissions, and extracts code and network classes from APK files for detailed insights.",
            "url": "https://dorpascal.com/apk-analyzer",
            "applicationCategory": "Utility",
            "operatingSystem": "Web",
            "browserRequirements": "HTML5, CSS3, JavaScript",
            "inLanguage": "en",
            "author": {
                "@type": "Person",
                "name": "Dor Pascal"
            },
            "image": "https://dorpascal.com/apk-analyzer/cover.png",
            "datePublished": "2024-08-06",
            "dateModified": "2024-08-06",
            "version": "1.0",
            "license": "https://opensource.org/licenses/MIT",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD",
                "availability": "https://schema.org/InStock",
                "url": "https://dorpascal.com/apk-analyzer"
            },
            "aggregateRating": {
                "@type": "AggregateRating",
                "ratingValue": "4.6",
                "bestRating": "5",
                "worstRating": "1",
                "ratingCount": "102044"
            }
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Dor Pascal",
            "url": "https://dorpascal.com",
            "logo": "https://dorpascal.com/favicon.png",
            "sameAs": [
                "https://www.linkedin.com/in/dorpascal",
                "https://github.com/Dor-sketch"
                ],
            "contactPoint": {
                "@type": "ContactPoint",
                "email": "dor.pascal@gmail.com",
                "contactType": "Customer service"
            }
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "name": "APK Analyzer",
            "itemListElement": [{
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://dorpascal.com"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "APK Analyzer",
                    "item": "https://dorpascal.com/apk-analyzer"
                }
            ]
        }
    </script>
    <meta name="description" content="Detects video files, analyzes manifest permissions, and extracts code and network classes from APK files for detailed insights.">
    <meta name="keywords" content="APK, Android, Analyzer, Video, Permissions, Code, Analysis">
    <meta name="author" content="Dor Pascal">
    <link type="image/png" sizes="16x16" rel="icon" href="./icons/Web/icons8-apk-outline-color-16.png">
    <link type="image/png" sizes="32x32" rel="icon" href="./icons/Web/icons8-apk-outline-color-32.png">
    <link type="image/png" sizes="96x96" rel="icon" href="./icons/Web/icons8-apk-outline-color-96.png">
    <link type="image/png" sizes="120x120" rel="icon" href="./icons/Web/icons8-apk-outline-color-120.png">
    <link rel="icon" type="image/png" sizes="72x72" href="./icons/Android-Chrome/icons8-apk-outline-color-72.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./icons/Android-Chrome/icons8-apk-outline-color-96.png">
    <link rel="icon" type="image/png" sizes="144x144" href="./icons/Android-Chrome/icons8-apk-outline-color-144.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/Android-Chrome/icons8-apk-outline-color-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icons/Android-Chrome/icons8-apk-outline-color-512.png">
    <link rel="apple-touch-icon" type="image/png" sizes="57x57" href="./icons/iOS/icons8-apk-outline-color-57.png">
    <link rel="apple-touch-icon" type="image/png" sizes="60x60" href="./icons/iOS/icons8-apk-outline-color-60.png">
    <link rel="apple-touch-icon" type="image/png" sizes="72x72" href="./icons/iOS/icons8-apk-outline-color-72.png">
    <link color="#26E07F" rel="mask-icon" href="./icons/macOS/icons8-apk-outline-color-64.svg">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#4CAF50">
    <meta property="og:image" content="https://dorpascal.com/apk-analyzer/cover.png">
    <meta property="og:image:width" content="1468">
    <meta property="og:image:height" content="1211">
    <meta property="og:image:alt" content="APK Analyzer">
    <meta property="og:image:type" content="image/png">
    <meta property="og:title" content="APK Analyzer">
    <meta property="og:description" content="Detects video files, analyzes manifest permissions, and extracts code and network classes from APK files for detailed insights.">
    <link rel="canonical" href="https://dorpascal.com/apk-analyzer/">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #4CAF50;
        }
        #apkFile {
            display: block;
            margin: 20px auto;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            display: block;
            margin: 0 auto;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #summary, #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        #summary h2, #result h2 {
            margin-top: 0;
            color: #4CAF50;
        }
        pre {
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>APK Analyzer</h1>
    <input type="file" id="apkFile" accept=".apk">
    <button onclick="analyzeAPK()">Analyze APK</button>
    <div id="summary">
        <h2>Summary</h2>
        <div id="summaryContent">No analysis yet.</div>
    </div>
    <div id="result">
        <h2>Full Report</h2>
        <pre id="reportContent"></pre>
    </div>

    <script>
        async function analyzeAPK() {
            const fileInput = document.getElementById('apkFile');
            const summaryDiv = document.getElementById('summaryContent');
            const reportDiv = document.getElementById('reportContent');

            if (!fileInput.files.length) {
                alert('Please select an APK file');
                return;
            }

            const file = fileInput.files[0];
            summaryDiv.textContent = 'Analyzing...';
            reportDiv.textContent = '';

            try {
                const zip = new JSZip();
                const contents = await zip.loadAsync(file);

                let report = 'APK Contents:\n\n';

                // List files in the APK
                for (let filename in contents.files) {
                    report += filename + '\n';
                }

                // Check for video files
                const videoExtensions = ['.mp4', '.avi', '.mkv'];
                const videoFiles = Object.keys(contents.files).filter(filename =>
                    videoExtensions.some(ext => filename.toLowerCase().endsWith(ext))
                );

                let videoSummary = videoFiles.length > 0
                    ? 'Video files detected: ' + videoFiles.join(', ')
                    : 'No video files detected.';
                report += '\nVideo Files Found:\n' + (videoFiles.length > 0 ? videoFiles.join('\n') : 'None') + '\n';

                // Try to read the AndroidManifest.xml
                let manifestSummary = 'No AndroidManifest.xml found.';
                if (contents.files['AndroidManifest.xml']) {
                    const manifestContent = await contents.file('AndroidManifest.xml').async('uint8array');

                    // Convert binary XML to readable format
                    let cleanedManifestContent = '';
                    for (let i = 0; i < manifestContent.length; i++) {
                        if (manifestContent[i] >= 32 && manifestContent[i] <= 126) {
                            cleanedManifestContent += String.fromCharCode(manifestContent[i]);
                        } else {
                            cleanedManifestContent += ' ';
                        }
                    }

                    // Remove spaces between characters
                    cleanedManifestContent = cleanedManifestContent.replace(/\s+/g, '');

                    report += '\nAndroidManifest.xml (cleaned content):\n' + cleanedManifestContent;

                    // Extract permissions using regex
                    const permissionRegex = /(android\.permission\.[A-Z_]+|[A-Z][a-zA-Z]+Permissions)/g;
                    const permissions = cleanedManifestContent.match(permissionRegex) || [];

                    manifestSummary = `Permissions Analysis:\n${permissions.length > 0 ? [...new Set(permissions)].join(', ') : 'None detected.'}`;
                    report += `\n\nPermissions Found:\n${permissions.length > 0 ? [...new Set(permissions)].join('\n') : 'None'}`;
                }

                // Try to read classes.dex
                let dexSummary = 'No classes.dex found.';
                if (contents.files['classes.dex']) {
                    const dexContent = await contents.file('classes.dex').async('uint8array');
                    report += '\n\nclasses.dex (first 100 bytes):\n' + Array.from(dexContent.slice(0, 100)).map(b => b.toString(16).padStart(2, '0')).join(' ');

                    // Simple heuristic to detect video playback code (e.g., ExoPlayer, MediaPlayer)
                    const dexString = new TextDecoder().decode(dexContent);
                    const videoClasses = ['ExoPlayer', 'MediaPlayer', 'VideoView'];
                    const networkClasses = ['HttpURLConnection', 'OkHttpClient', 'Socket'];

                    const foundVideoClasses = videoClasses.filter(videoClass => dexString.includes(videoClass));
                    const foundNetworkClasses = networkClasses.filter(networkClass => dexString.includes(networkClass));

                    dexSummary = `Code Analysis:\nVideo Classes: ${foundVideoClasses.length > 0 ? foundVideoClasses.join(', ') : 'None'}\nNetwork Classes: ${foundNetworkClasses.length > 0 ? foundNetworkClasses.join(', ') : 'None'}`;
                    report += `\n\nVideo Classes Found:\n${foundVideoClasses.length > 0 ? foundVideoClasses.join('\n') : 'None'}`;
                    report += `\n\nNetwork Classes Found:\n${foundNetworkClasses.length > 0 ? foundNetworkClasses.join('\n') : 'None'}`;

                    // Detect common HTTP methods and URLs
                    const httpMethods = ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'];
                    const httpRegex = new RegExp(httpMethods.join('|'), 'g');
                    const urls = dexString.match(/https?:\/\/[^\s]+/g) || [];
                    const foundMethods = dexString.match(httpRegex) || [];

                    const webRequests = `HTTP Methods: ${foundMethods.length > 0 ? foundMethods.join(', ') : 'None'}
                    URLs: ${urls.length > 0 ? urls.join(', ') : 'None'}`;
                    dexSummary += `\nWeb Requests:\n${webRequests}`;
                    report += `\n\nWeb Requests Found:\n${webRequests}`;
                }

                summaryDiv.innerHTML = `
                    <strong>Video Files:</strong> ${videoSummary}<br>
                    <strong>Manifest Permissions:</strong><br>${manifestSummary.replace(/\n/g, '<br>')}<br>
                    <strong>Code Analysis:</strong><br>${dexSummary.replace(/\n/g, '<br>')}
                `;
                reportDiv.textContent = report;
            } catch (error) {
                summaryDiv.textContent = `Error: ${error.message}`;
                reportDiv.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
